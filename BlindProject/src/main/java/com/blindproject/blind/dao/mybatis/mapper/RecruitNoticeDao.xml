<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.blindproject.blind.dao.RecruitNoticeDao">
   
	<!-- writerId는 회원가입 만들고 변경해줍시다... -->
	<insert id="insertRecruitNotice" parameterType="com.blindproject.blind.entity.RecruitNotice">
		insert into Recruit_Notice(title, contents, reg_date, writer_id, str_date, end_date, recruit_division_id, company_id)
		values(#{title}, #{contents}, curdate(), 1, #{strDate}, #{endDate}, #{recruitDivisionId}, #{companyId});
	</insert>
	
	<update id="updateRecruitNotice" parameterType="com.blindproject.blind.entity.RecruitNotice">
		update Recruit_Notice
		set title = #{title}, 
			contents = #{contents}, 
			writer_id = 1, 
			str_date = #{strDate}, 
			end_date = #{endDate}, 
			recruit_division_id = #{recruitDivisionId}, 
			company_id = #{companyId}
		where id=#{id}
	</update>
	
	<select id="get" resultType="com.blindproject.blind.entity.RecruitNotice">
		Select
			rn.id,
			rn.title,
			rn.contents,
			rn.reg_date as regDate,
			rn.writer_id,
			rn.str_date as strDate,
			rn.end_date as endDate,
			c.name as companyName,
			rd.value as recruitDivisionValue
		From Recruit_Notice rn 
		left JOIN Company c
		ON rn.company_id = c.id
		left JOIN Recruit_Division rd
		ON rn.recruit_division_id = rd.id
		where rn.id = #{param1}
	</select>
	
	<select id="getList" resultType="com.blindproject.blind.entity.RecruitNotice">
		Select
			rn.id,
			rn.title,
			rn.contents,
			rn.reg_date as regDate,
			rn.writer_id,
			rn.str_date as strDate,
			rn.end_date as endDate,
			c.name as companyName,
			rd.value as recruitDivisionValue
		From Recruit_Notice rn 
		left JOIN Company c
		ON rn.company_id = c.id
		left JOIN Recruit_Division rd
		ON rn.recruit_division_id = rd.id
		ORDER BY rn.id desc;
	</select>
	

</mapper>